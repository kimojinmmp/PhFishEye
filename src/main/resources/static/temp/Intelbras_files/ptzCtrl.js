function ptzLeave(a,b,c,d){1==g_ptzDown&&(g_ptzDown=!1,cptzd(a,b,c,d))}function cptzd(a,b,c,d){if(1==multiPreview.multiPreviewState.state&&multiPreview.multiPreviewState.windowID==gwid)return void(a&&alert(tl("opr_ocx.Can't control PTZ of which channel is in the state of realplay!")));if(1!=gst_sel&&10!=gst_sel)return void(a&&alert(tl("opr_ocx.Can't control PTZ of which channel is in the state of realplay!")));if(!chkPtzAuthority())return void(a&&alert(tl("com_msg.Please set the Authority of this IP!")));if(a&&getPtzCfg(),"NONE"==jsonPTZ[gch_sel-0].ProtocolName&&0==jsonPTZ[gch_sel-0].PTZType)return void(a&&alert(tl("com_msg.Please set PTZ protocol of this channel first!")));var e=PtzCtrl.instance();if(e.pztPostResult=function(){},"LeftUp"==b||"RightUp"==b||"LeftDown"==b||"RightDown"==b)e.sendPtzRequest(a,b,c,c,0,gch_sel-0),g_ptzDown=0==a?!1:!0;else if("StartTour"==b||"StartPattern"==b||"StopPattern"==b)e.sendPtzRequest(a,b,c,0,d,gch_sel-0);else{e.sendPtzRequest(a,b,c,0,0,gch_sel-0);var f="Left"==b||"Right"==b||"Up"==b||"Down"==b||"ZoomWide"==b||"ZoomTele"==b||"FocusNear"==b||"FocusFar"==b||"IrisSmall"==b||"IrisLarge"==b;f&&(g_ptzDown=0==a?!1:!0)}}function controlPtz(a,b,c,d,e){if(1!=gst_sel&&10!=gst_sel)return alert(tl("opr_ocx.Can't control PTZ of which channel is in the state of realplay!")),!1;if(1==multiPreview.multiPreviewState.state&&multiPreview.multiPreviewState.windowID==gwid)return void alert(tl("opr_ocx.Can't control PTZ of which channel is in the state of realplay!"));if(!chkPtzAuthority())return void alert(tl("com_msg.No Right"));if(getPtzCfg(),"NONE"==jsonPTZ[gch_sel-0].ProtocolName&&0==jsonPTZ[gch_sel-0].PTZType)return alert(tl("com_msg.Please set PTZ protocol of this channel first!")),!1;var f=PtzCtrl.instance();return f.pztPostResult=function(){},f.sendPtzRequest(a,b,c,d,e,gch_sel-0),!0}function getPtzCfg(){var a=ConfigManager.instance(),b=function(a){jsonPTZ=JSON.decode(a).result?JSON.decode(a).params.table:""};a.getConfig("Ptz",b,!1)}function chkPtzAuthority(){return""==g_authorityListPtz&&getCurAuthorityList(),null==g_authorityListPtz?!1:g_authorityListPtz.contains("MPTZ")?!0:!1}function getCurAuthorityList(){var a="",b=Cookie.read("DhWebCookie");a=JSON.decode(b).username;var c=function(a){g_authorityListPtz=JSON.decode(a).params.user.AuthorityList},d=UserManager.instance();d.getUserInfo(a,c,!1)}var jsonPTZ="",g_authorityListPtz=[],g_ptzDown=!1;